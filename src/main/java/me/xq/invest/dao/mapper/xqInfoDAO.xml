<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="me.xq.invest.dao.XqInfoDAO">

    <insert id="addNewXqInfo">
        insert into xq_info
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="xqId != null and xqId != ''">
                xq_id,
            </if>
            <if test="xqName != null and xqName != ''">
                xq_name,
            </if>
            <if test="startDate != null and startDate !='' ">
                start_date,
            </if>
            <if test="endDate != null and endDate != ''">
                end_date,
            </if>
        </trim>

        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="xqId != null and xqId != ''">
                #{xqId},
            </if>
            <if test="xqName != null and xqName != ''">
                #{xqName},
            </if>
            <if test="startDate != null and startDate !='' ">
                #{startDate},
            </if>
            <if test="endDate != null and endDate != ''">
                #{endDate},
            </if>
        </trim>
        on duplicate key
        update
        <trim  suffixOverrides=",">
            <if test="xqName != null and xqName != ''">
                xq_name = #{xqName},
            </if>
            <if test="startDate != null and startDate !='' ">
                start_date = #{startDate},
            </if>
            <if test="endDate != null and endDate != ''">
                end_date = #{endDate},
            </if>
        </trim>


    </insert>

    <select id="countXqByXqId" resultType="integer">
        select count(*)
        from xq_info
        where xq_id = #{xqId}
    </select>

    <select id="getXqInfoByXqId" resultType="me.xq.invest.domain.XqInfo">
        select
        xq_id xqId,
        xq_name xqName,
        start_date startDate,
        end_date endDate
        from xq_info
        where
        xq_id = #{xqId}
    </select>
</mapper>
